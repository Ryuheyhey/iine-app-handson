(this["webpackJsonpiine-app-handson"]=this["webpackJsonpiine-app-handson"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),s=n(16),r=n.n(s),a=(n(24),n(25),n(4)),o=n(17),u=n.n(o),l=n(0),d=function(e,t){var n="".concat("https://tahpkwglvd.execute-api.us-east-1.amazonaws.com/production","/fav?name=").concat(e,"&maxid=").concat(t);return new Promise((function(e,t){u.a.get(n).then((function(t){e(t.data),console.log(n),console.log(t.data)})).catch((function(e){t(e)}))}))},j=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)({url:[],height:[],source:[],max_id:""}),r=Object(a.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)(""),h=Object(a.a)(j,2),b=h[0],f=h[1],x=function(e){d(e,o.max_id).then((function(e){console.log(e),console.log(o),v(e)})).catch((function(){i("\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u5165\u529b\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002")}))},v=function(e){u({url:o.url.concat(e.url),height:o.height.concat(e.height),source:o.source.concat(e.source),max_id:String(e.max_id)}),0===e.url.length&&i("\u3044\u3044\u306d\u3057\u305f\u753b\u50cf\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002"),i(""),console.log(o)};return console.log(b),Object(c.useEffect)((function(){var e;window.addEventListener("scroll",(function(){clearTimeout(e),e=setTimeout((function(){var e=document.documentElement.scrollTop+window.innerHeight,t=document.documentElement.offsetHeight;t-e<=1e3&&"Loading..."!==n&&t>1500&&(i("Loading..."),x(b))}),500)}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)(m,{onSubmit:function(e){return function(e){e!==b?(i("Loading..."),d(e,o.max_id).then((function(t){u({url:t.url,height:t.height,source:t.source,max_id:t.max_id}),i(""),f(e)})).catch((function(){i("\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u5165\u529b\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002")})),console.log(o)):(f(e),i("Loading..."),x(e))}(e)}}),Object(l.jsx)(O,{images:o}),Object(l.jsx)("div",{className:"box h-64 text-center m-5 p-4 ...",children:n})]})},m=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),i=n[0],s=n[1],r=Object(c.useCallback)((function(e){s(e.target.value)}),[s]),o=Object(c.useCallback)((function(t){e.onSubmit(i),t.preventDefault()}),[i]);return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:o,children:[Object(l.jsx)("div",{className:"flex justify-center mb-5 mx-5",children:Object(l.jsxs)("p",{className:"md-5",children:["twitter\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30cd\u30fc\u30e0\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u4f8b\uff1a@hukurouo\uff09",Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),"\u305d\u306e\u4eba\u304c\u3044\u3044\u306d\u3057\u305f\u753b\u50cf\u304c\u826f\u3044\u611f\u3058\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002"]})}),Object(l.jsx)("div",{className:"flex mb-5 mx-auto max-w-xs",children:Object(l.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm mx-5 w-11/12",children:[Object(l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Object(l.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"@"})}),Object(l.jsx)("input",{type:"text",autoCapitalize:"off",name:"screen_name",value:i,onChange:r,className:"bg-white focus:outline-none focus:shadow-outline py-2 px-8 rounded-md w-full"})]})}),Object(l.jsx)("div",{className:"flex justify-center mb-5 mx-5",children:Object(l.jsx)("input",{type:"submit",value:"\u53d6\u5f97",disabled:""===i,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 mx-2 rounded w-20 mb-10"})})]})})},h=function(e){return Object(l.jsx)("a",{href:e.source,target:"_blank",rel:"noopener noreferrer",children:Object(l.jsx)("img",{src:e.url,alt:""})})},b=function(e){var t;return Object(l.jsx)("div",{children:(t=e.raneItems,Object(l.jsx)("div",{className:"flex flex-col",children:t.map((function(e,t){return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"m-1 max-w-xs",children:Object(l.jsx)(h,{url:e.url,source:e.source})})},t)}))}))})},f=function(e,t){var n=Array(e).fill([]).map((function(e){return[]})),c=Array(e).fill(0);return t.url.forEach((function(e,i){var s=x(c);c[s]+=t.height[i],n[s].push({url:e,source:t.source[i]})})),n},x=function(e){var t=0,n=1e5;return e.forEach((function(e,c){n>e&&(t=c,n=e)})),t},O=function(e){var t=Object(c.useState)(window.innerWidth>600?Math.floor(window.innerWidth/300):2),n=Object(a.a)(t,2),i=n[0],s=n[1];return Object(c.useEffect)((function(){var e;window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){var e=window.innerWidth>600?Math.floor(window.innerWidth/300):2;s(e)}),500)}))}),[]),Object(l.jsx)("div",{className:"flex m-1",children:f(i,e.images).map((function(e,t){return Object(l.jsx)("div",{children:Object(l.jsx)(b,{raneItems:e})},t)}))})},v=n(6);var g=function(){return Object(l.jsxs)(v.b,{children:[Object(l.jsx)(v.a,{children:Object(l.jsx)("title",{children:"iine-app-handson"})}),Object(l.jsx)("div",{className:"bg-blue-50 min-h-screen",children:Object(l.jsxs)("div",{className:"container mx-auto",children:[Object(l.jsx)("header",{className:"flex justify-center items-center text-3xl h-32 mx-5",children:"\u3044\u3044\u306d\u3057\u305f\u753b\u50cf\u3092\u4e26\u3079\u308b"}),Object(l.jsx)("div",{className:"flex justify-center",children:Object(l.jsx)(j,{})})]})})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),s(e),r(e)}))};r.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root")),p()}},[[47,1,2]]]);
//# sourceMappingURL=main.31cc2710.chunk.js.map